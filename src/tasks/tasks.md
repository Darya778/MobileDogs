## Функции для работы с заданиями

1. `create_task(task: TaskCreate, db: Session = Depends(get_db))`

Описание: Эта функция отвечает за создание новых заданий.

Параметры:

* `task: TaskCreate`: Данные нового задания, которые передаются в виде объекта `TaskCreate`.
* `db: Session`: Сессия базы данных, полученная из контекста зависимости `get_db`.

Действия:

1. Вызывает функцию `db_manager.add_task` для добавления нового задания в базу данных.
2. Если функция `db_manager.add_task` успешно добавляет задание, функция записывает информацию об успешном добавлении в лог и возвращает ID задания, сообщение об успешном добавлении и текст задания.
3. Обрабатывает любые исключения, возникшие в процессе добавления, записывает их в лог и генерирует исключение `HTTPException` с кодом 500 и описанием ошибки.

2. `update_task(task_id: int, task_update: TaskUpdate, db: Session = Depends(get_db))`

Описание: Эта функция отвечает за обновление данных существующего задания.

Параметры:

* `task_id: int`: ID задания, которое нужно обновить.
* `task_update: TaskUpdate`: Данные для обновления, которые передаются в виде объекта `TaskUpdate`.
* `db: Session`: Сессия базы данных, полученная из контекста зависимости `get_db`.

Действия:

1. Вызывает функцию `db_manager.update_task` для обновления данных задания в базе данных.
2. Если функция `db_manager.update_task` успешно обновляет данные, функция записывает информацию об успешном обновлении в лог и возвращает сообщение об успешном обновлении.
3. Обрабатывает любые исключения, возникшие в процессе обновления, записывает их в лог и генерирует исключение `HTTPException` с кодом 500 и описанием ошибки.

3. `delete_task(task_id: int, db: Session = Depends(get_db))`

Описание: Эта функция отвечает за удаление (архивацию) задания.

Параметры:

* `task_id: int`: ID задания, которое нужно удалить.
* `db: Session`: Сессия базы данных, полученная из контекста зависимости `get_db`.

Действия:

1. Вызывает функцию `db_manager.archive_task` для архивирования задания в базе данных.
2. Если функция `db_manager.archive_task` успешно архивирует задание, функция записывает информацию об успешном удалении в лог и возвращает сообщение об успешном удалении.
3. Обрабатывает любые исключения, возникшие в процессе удаления, записывает их в лог и генерирует исключение `HTTPException` с кодом 500 и описанием ошибки.

### Дополнительные замечания:

* `db_manager`: Класс, который предоставляет функции для взаимодействия с базой данных.
* `log_message`:  Функция для записи сообщений в лог-файл.
* `HTTPException`:  Это исключение используется для генерации ответа HTTP с кодом ошибки.

### Пример использования:
```
# Создание нового задания
task_data = TaskCreate(id_user_1=123, id_user_2=456, id_task=789, task_text="Купить хлеб")
task_id, message, task_text = create_task(task_data, db)

# Обновление данных задания
task_update_data = TaskUpdate(confirm=True, task_text="Купить молоко")
update_task(task_id, task_update_data, db)

# Удаление (архивирование) задания
delete_task(task_id, db)
```