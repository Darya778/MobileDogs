# MobileDogs

### Идея проекта:
Проект "Mobile Dogs" представляет собой систему для отслеживания бездомных собак с помощью носимых устройств (ошейников). 
Каждый пользователь может выбрать себе некоторое количество бездомных собак для отслеживания. 
Персонал устанавливает новые ошейники на бездомных собак. 
Пользователи могут наблюдать за собаками, давать задания другим пользователям, а также получать данные о собаках через приложение.
Персонал устанавливает новые ошейники на бездомных собак. 
Есть базовые станции LoRa для связи носимых устройств (ошейников). 
Есть регистрация пользователей и ошейников. Носимые устройства регистрирует только персонал.

### [Сценарии:](./scenaries)

1. Регистрация пользователей:
     * Пользователи могут зарегистрироваться, указав свои данные и получив уникальный идентификатор.
2. Регистрация ошейников:
     * Персонал может зарегистрировать новые ошейники, присваивая им уникальные идентификаторы и привязывая к конкретным собакам.
3. Оповещение пользователей:
     * Пользователи получают данные о местоположении и состоянии собак через приложение.
4. Модерирование:
     * Персонал следит за состоянием ошейников, информацией о пользователях и собаках, и при необходимости, модерирует контент.
5. Задание от одних пользователям другим:
     * Пользователи могут давать задания другим пользователям по уходу за определенными собаками, кормлением или выполнению других действий.
6.  Привязка ошейников и пользователей:
     * Пользователи могут "привязывать" зарегистрированные ошейники к своему аккаунту для отслеживания конкретных собак.


### Необходимые запросы для реализации сценариев:
1. POST request для регистрации пользователей
2. PUT request для изменения пользователя
3. DELETE request для удаления пользователя
4. POST request для добавления задания
5. PUT request для изменения задания
6. DELETE request для удаления задания
7. POST request для добавления ошейника
8. PUT request для изменения ошейника
9. DELETE request для удаления ошейника
10. GET request для получения списка всех ошейников
11. POST request для добавления координат
12. PUT request для изменения координат
13. DELETE request для удаления координат
14. GET request для возвращения всех координат ошейника по заданному времени
15. POST request для добавления связи пользователя с ошейником
16. PUT request для изменения связи пользователя с ошейником
17. DELETE request для удаления связи пользователя с ошейником


### Инструкции для установки зависимостей и запуска приложения:

#### Установка зависимостей

1. Убедитесь, что у вас установлены Python версии 3.6 или выше, а также pip версии 10.0 или выше.
2. Создайте виртуальное окружение, чтобы изолировать зависимости приложения от других проектов. Используйте команду:
```
python3 -m venv venv
```
3. Активируйте виртуальное окружение:
```
source venv/bin/activate
```
4. Установите зависимости из файла requirements.txt. Запустите команду:
```
python -m pip install --upgrade pip
pip install -r requirements.txt 
```
5. Установите сертификаты и зависимости для postgreSQL:
```
mkdir -p ~/.postgresql && \
wget "https://storage.yandexcloud.net/cloud-certs/CA.pem" \
    --output-document ~/.postgresql/root.crt && \
chmod 0600 ~/.postgresql/root.crt
```
```
sudo apt update && sudo apt install --yes postgresql-client
```

#### Доп. установки и настройки
1. Настройте [ELK](https://github.com/vesninam/elk/blob/main/elk/README.md)
2. Настройте [Filebeat](https://github.com/PecherskyDaniil/MyRepo)


#### Запуск приложения
1. Клонируйте репозиторий:
```
sudo apt update
sudo apt install git
git clone URL
```
2. Перейдите в каталог приложения (~/MobileDogs/src).
3. Запустите приложение с помощью команды:
```
uvicorn main:app --reload
```
4. Запустите Filebeat в отдельном окне и проверить статус работы всех серверов (в файле `/etc/filebeat/filebeat.yml` в `filebeat.inputs` в `parth` ~/MobileDogs/src/log/*.json)
```
sudo systemctl status elasticsearch.service
sudo systemctl status kibana.service
sudo systemctl status logstash.service
sudo filebeat -e
```
5. Чтобы выйти из приложения, нажмите `Ctrl + C` в терминале, в котором оно запущено. Чтобы деактивировать виртуальное окружение, запустите команду: `deactivate`


